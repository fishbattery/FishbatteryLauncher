<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Fishbattery Launcher</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self';
        connect-src https: http://localhost:5173 ws://localhost:5173;
        img-src 'self' data:;
        style-src 'self' 'unsafe-inline';
        script-src 'self' 'unsafe-inline'"
    />
    <script type="module" crossorigin src="./assets/index-DX7ReF7j.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-BAP6VyE9.css">
  </head>

  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="brand">
          <div class="dot"></div>
          <div>
            <strong>Fishbattery Launcher</strong>
            <small>Underwater fabric launcher</small>
          </div>
        </div>

        <div class="nav">
          <button id="navLibrary" class="active">Library</button>
          <button id="navMods">Mods</button>
          <button id="navSettings">Settings</button>
        </div>

        <div class="sidebarFooter">Data is stored per instance in your launcher folder.</div>
      </aside>

      <section class="main">
        <div class="topbar">
          <div class="search">
            <span>Search</span>
            <input id="searchInstances" placeholder="Search instances by name or version" />
          </div>

          <div class="topActions">
            <button id="btnCreate" class="btn">Create</button>
            <button id="btnPlayActive" class="btn btnPrimary">Play</button>
            <button id="btnStopActive" class="btn btnDanger" style="display:none">Stop</button>

            <div class="account">
              <div id="accountBtn" class="accountBtn">
                <div class="accountLeft">
                  <div class="avatar" id="accountAvatar">?</div>
                  <div class="accountMeta">
                    <strong id="accountName">No account</strong>
                    <small id="accountSub">Sign in to play</small>
                  </div>
                </div>
                <div class="muted">▾</div>
              </div>

              <div id="accountDropdown" class="dropdown">
                <div class="dropdownHeader">Playing as</div>
                <div id="accountItems"></div>
                <div class="dropdownItem" id="accountAdd">
                  <div class="left">
                    <div class="avatar">+</div>
                    <div>
                      <div>Add account</div>
                      <small class="muted">Microsoft login</small>
                    </div>
                  </div>
                  <div class="right"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="content">
          <div id="viewLibrary">
            <div class="sectionTitle">
              <div>
                <h2>Library</h2>
                <p>Your instances, isolated and launch-ready.</p>
              </div>
              <div class="row">
                <span class="muted" id="statusText"></span>
              </div>
            </div>

            <div class="grid" id="instancesGrid"></div>

            <div class="logs">
              <div class="logsHeader">
                <span>Logs</span>
                <button id="btnClearLogs" class="btn">Clear</button>
              </div>
              <pre id="logs"></pre>
            </div>
          </div>

          <div id="viewMods" style="display:none">
            <div class="sectionTitle">
              <div>
                <h2>Mods</h2>
                <p>Resolve Modrinth mods for the selected instance.</p>
              </div>
              <div class="row">
                <button id="btnUpdateMods" class="btn">Update Mods</button>
              </div>
            </div>

            <div class="card" style="padding:12px">
              <div class="muted" id="modsHint">Select an instance first.</div>
              <div style="height:10px"></div>
              <div id="modsList"></div>
            </div>
          </div>

          <div id="viewSettings" style="display:none">
            <div class="sectionTitle">
              <div>
                <h2>Settings</h2>
                <p>Fishbattery Loader preferences (saved locally).</p>
              </div>
            </div>

            <div class="settingsLayout">
              <div class="settingsNav">
                <button id="setNavGeneral" class="setNavBtn active">General</button>
                <button id="setNavInstall" class="setNavBtn">Installation</button>
                <button id="setNavWindow" class="setNavBtn">Window</button>
                <button id="setNavJava" class="setNavBtn">Java and memory</button>
                <button id="setNavHooks" class="setNavBtn">Launch hooks</button>
              </div>

              <div class="settingsPanel">

                <!-- GENERAL -->
                <div id="setPanelGeneral" class="setPanel">
                  <h3>Theme</h3>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Color theme</div>
                      <div class="setHelp">Ocean is the Fishbattery default.</div>
                    </div>
                    <select id="setTheme" class="setControl">
                      <option value="ocean">Ocean</option>
                      <option value="dark">Dark</option>
                      <option value="oled">OLED</option>
                    </select>
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Blur / glass panels</div>
                      <div class="setHelp">Adds subtle blur like Modrinth.</div>
                    </div>
                    <label class="switch">
                      <input id="setBlur" type="checkbox" />
                      <span class="slider"></span>
                    </label>
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Show snapshots</div>
                      <div class="setHelp">Includes snapshots in version dropdowns.</div>
                    </div>
                    <label class="switch">
                      <input id="setShowSnapshots" type="checkbox" />
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>

                <!-- INSTALLATION -->
                <div id="setPanelInstall" class="setPanel" style="display:none">
                  <h3>Installation</h3>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Auto-update mods for selected version</div>
                      <div class="setHelp">When you create/edit an instance, refresh Modrinth mods automatically.</div>
                    </div>
                    <label class="switch">
                      <input id="setAutoUpdateMods" type="checkbox" />
                      <span class="slider"></span>
                    </label>
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Note</div>
                      <div class="setHelp">
                        Each instance is isolated. This launcher keeps its own versions/assets/libraries/mods per instance folder.
                      </div>
                    </div>
                  </div>
                </div>

                <!-- WINDOW -->
                <div id="setPanelWindow" class="setPanel" style="display:none">
                  <h3>Window</h3>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Fullscreen</div>
                      <div class="setHelp">Saved preference (wire into launch next).</div>
                    </div>
                    <label class="switch">
                      <input id="setFullscreen" type="checkbox" />
                      <span class="slider"></span>
                    </label>
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Default width</div>
                      <div class="setHelp">Used for new instances (optional).</div>
                    </div>
                    <input id="setWinW" class="setControl" type="number" min="640" step="10" />
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Default height</div>
                      <div class="setHelp">Used for new instances (optional).</div>
                    </div>
                    <input id="setWinH" class="setControl" type="number" min="360" step="10" />
                  </div>
                </div>

                <!-- JAVA -->
                <div id="setPanelJava" class="setPanel" style="display:none">
                  <h3>Java and memory</h3>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Default memory (MB)</div>
                      <div class="setHelp">Pre-fills the Create/Edit Instance modal.</div>
                    </div>
                    <input id="setDefaultMem" class="setControl" type="number" min="1024" step="256" />
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Extra JVM arguments</div>
                      <div class="setHelp">Saved here. Wire into launch when you want.</div>
                    </div>
                    <input id="setJvmArgs" class="setControl" placeholder="-XX:+UseG1GC ..." />
                  </div>
                </div>

                <!-- HOOKS -->
                <div id="setPanelHooks" class="setPanel" style="display:none">
                  <h3>Launch hooks</h3>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Pre-launch command</div>
                      <div class="setHelp">Saved here. Wire into launch later.</div>
                    </div>
                    <input id="setPreLaunch" class="setControl" placeholder="e.g. echo pre" />
                  </div>

                  <div class="setRow">
                    <div>
                      <div class="setLabel">Post-exit command</div>
                      <div class="setHelp">Saved here. Wire into launch later.</div>
                    </div>
                    <input id="setPostExit" class="setControl" placeholder="e.g. echo post" />
                  </div>
                </div>

              </div>
            </div>
          </div>

        </div>
      </section>
    </div>

    <div id="modalBackdrop" class="modalBackdrop">
      <div class="modal">
        <div class="modalHeader">
          <strong id="modalTitle">Create an instance</strong>
          <button id="modalClose" class="iconBtn">✕</button>
        </div>
        <div class="modalBody">
          <div class="field">
            <label>Name</label>
            <input id="newName" placeholder="Enter a name for your instance" />
          </div>

          <div class="row">
            <div class="field" style="flex:1">
              <label>Game version</label>
              <select id="newVersion"></select>
            </div>
            <div class="field" style="width:160px">
              <label>Memory (MB)</label>
              <input id="newMem" type="number" min="1024" step="256" value="4096" />
            </div>
          </div>

          <div class="muted" style="font-size:13px">
            Creates an isolated game folder, installs Fabric profile, then resolves your Modrinth mods for that version.
          </div>
        </div>
        <div class="modalFooter">
          <button id="modalCancel" class="btn">Cancel</button>
          <button id="modalCreate" class="btn btnPrimary">Save</button>
        </div>
      </div>
    </div>

  </body>
</html>
